# home/models.py
from django.db import models

class MenuCategory(models.Model):
    category_name = models.CharField(max_length=200, unique=True)

        def __str__(self):
                return self.category_name


                class MenuItem(models.Model):
                    name = models.CharField(max_length=200, unique=True)
                        description = models.TextField(blank=True)
                            price = models.DecimalField(max_digits=6, decimal_places=2)
                                category = models.ForeignKey(
                                            MenuCategory,
                                                    on_delete=models.CASCADE,
                                                            related_name='items'
                                                                )

                                                                    def __str__(self):
                                                                            return self.related_name# home/views.py
                                                                            from rest_framework.views import APIView
                                                                            from rest_framework.response import Response
                                                                            from rest_framework import status
                                                                            from .models import MenuItem
                                                                            from .serializers import MenuItemSerializer

                                                                            class MenuItemsByCategoryView(APIView):
                                                                                """
                                                                                    Returns menu items filtered by category.
                                                                                        Example: /api/menu-items-by-category/?category=Drinks
                                                                                            """

                                                                                                def get(self, request):
                                                                                                        category_name = request.query_params.get('category')

                                                                                                                if not category_name:
                                                                                                                            return Response(
                                                                                                                                                {"error": "Category parameter is required."},
                                                                                                                                                                status=status.HTTP_400_BAD_REQUEST
                                                                                                                                                                            )

                                                                                                                                                                                    # Filter menu items by category name (case-insensitive)
                                                                                                                                                                                            menu_items = MenuItem.objects.filter(
                                                                                                                                                                                                            category__category_name__iexact=category_name
                                                                                                                                                                                                                    )

                                                                                                                                                                                                                            if not menu_items.exists():
                                                                                                                                                                                                                                        return Response(
                                                                                                                                                                                                                                                            {"message": f"No menu items found for category '{category_name}'."},
                                                                                                                                                                                                                                                                            status=status.HTTP_404_NOT_FOUND
                                                                                                                                                                                                                                                                                        )

                                                                                                                                                                                                                                                                                                serializer = MenuItemSerializer(menu_items, many=True)
                                                                                                                                                                                                                                                                                                        return Response(serializer.data, status=status.HTTP_200_OK)
                                                                                                                                                                                                                                        )
                                                                                                                                                                                            )
                                                                                                                            )
                                )