# home/models.py
from django.db import models

class MenuItem(models.Model):
    name = models.CharField(max_length=200, unique=True)
        description = models.TextField(blank=True)
            price = models.DecimalField(max_digits=6, decimal_places=2)
                category = models.ForeignKey(
                            'home.MenuCategory',
                                    on_delete=models.CASCADE,
                                            related_name='items'
                                                )

                                                    def __str__(self):
                                                            return self.name
                )# home/serializers.py
                from rest_framework import serializers
                from .models import MenuItem

                class MenuItemSerializer(serializers.ModelSerializer):
                    class Meta:
                            model = MenuItem
                                    fields = ['id', 'name', 'description', 'price', 'category']

                                        def validate_price(self, value):
                                                if value <= 0:
                                                            raise serializers.ValidationError("Price must be a positive number.")
                                                                    return value# home/views.py
                                                                    from rest_framework import viewsets, permissions, status
                                                                    from rest_framework.response import Response
                                                                    from rest_framework.exceptions import NotFound
                                                                    from .models import MenuItem
                                                                    from .serializers import MenuItemSerializer

                                                                    class MenuItemViewSet(viewsets.ModelViewSet):
                                                                        queryset = MenuItem.objects.all()
                                                                            serializer_class = MenuItemSerializer
                                                                                permission_classes = [permissions.IsAdminUser]  # Only admins can update

                                                                                    def update(self, request, pk=None):
                                                                                            try:
                                                                                                        menu_item = self.get_object()
                                                                                                                except MenuItem.DoesNotExist:
                                                                                                                            raise NotFound("Menu item not found.")

                                                                                                                                    serializer = self.get_serializer(menu_item, data=request.data, partial=False)  # full update
                                                                                                                                            serializer.is_valid(raise_exception=True)
                                                                                                                                                    serializer.save()
                                                                                                                                                            return Response(serializer.data, status=status.HTTP_200_OK)

                                                                                                                                                                def partial_update(self, request, pk=None):
                                                                                                                                                                        """PATCH method for partial updates"""
                                                                                                                                                                                try:
                                                                                                                                                                                            menu_item = self.get_object()
                                                                                                                                                                                                    except MenuItem.DoesNotExist:
                                                                                                                                                                                                                raise NotFound("Menu item not found.")

                                                                                                                                                                                                                        serializer = self.get_serializer(menu_item, data=request.data, partial=True)
                                                                                                                                                                                                                                serializer.is_valid(raise_exception=True)
                                                                                                                                                                                                                                        serializer.save()
                                                                                                                                                                                                                                                return Response(serializer.data, status=status.HTTP_200_OK)