from django.db import models

# Custom Manager
class ActiveOrderManager(models.Manager):
    def get_active_orders(self):
            """
                    Return only orders with status 'pending' or 'processing'
                            """
                                    return self.filter(status__in=['pending', 'processing'])


                                    class Order(models.Model):
                                        STATUS_CHOICES = [
                                                    ('pending', 'Pending'),
                                                            ('processing', 'Processing'),
                                                                    ('shipped', 'Shipped'),
                                                                            ('completed', 'Completed'),
                                                                                    ('cancelled', 'Cancelled'),
                                                                                        ]

                                                                                            user = models.ForeignKey('auth.User', on_delete=models.CASCADE)
                                                                                                order_date = models.DateTimeField(auto_now_add=True)
                                                                                                    status = models.CharField(max_length=20, choices=STATUS_CHOICES, default='pending')
                                                                                                        total_price = models.DecimalField(max_digits=10, decimal_places=2)

                                                                                                            # Attach custom manager
                                                                                                                objects = ActiveOrderManager()

                                                                                                                    def __str__(self):
                                                                                                                            return f"Order {self.id} - {self.status}"
                                        ]